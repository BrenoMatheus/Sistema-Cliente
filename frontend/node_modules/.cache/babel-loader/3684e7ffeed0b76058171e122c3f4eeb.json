{"ast":null,"code":"var _jsxFileName = \"/home/brenomatheus/Documentos/frontend/src/pages/orders/components/itemofLines/TableList.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { Grid, Icon, IconButton, TextField } from '@mui/material';\nimport { formValidationSchema } from './DetailItemofLines';\nimport { ItemofLinesService } from '../../../../shared/services/api/itemofLines/ItemofLinesService';\nimport { VForm, useVForm } from '../../../../shared/forms';\nimport { useNavigate } from 'react-router-dom';\nimport { AutoCompleteItem } from './AutoCompleteItem';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const TableList = _ref => {\n  _s();\n\n  let {\n    data,\n    key,\n    id,\n    handleDelete\n  } = _ref;\n  const [changedAmount, setChangedAmount] = useState(data.amount);\n  const [changedTotal, setChangedTotal] = useState(data.total);\n  const [isLoading, setIsLoading] = useState(false);\n  const {\n    formRef,\n    isSaveAndClose\n  } = useVForm();\n  const navigate = useNavigate();\n\n  const handleSave = dados => {\n    formValidationSchema.validate(dados, {\n      abortEarly: false\n    }).then(dadosValidados => {\n      setIsLoading(true);\n\n      if (changedAmount !== dados.amount || changedTotal !== dados.total) {\n        ItemofLinesService.updateById(Number(id), {\n          id: Number(id),\n          ...dadosValidados,\n          amount: changedAmount,\n          total: changedTotal\n        }).then(result => {\n          setIsLoading(false);\n\n          if (result instanceof Error) {\n            alert(result.message);\n          } else {\n            if (isSaveAndClose()) {\n              navigate('/orders');\n            }\n          }\n        });\n      }\n    }).catch(errors => {\n      var _formRef$current;\n\n      const validationErrors = {};\n      errors.inner.forEach(error => {\n        if (!error.path) return;\n        validationErrors[error.path] = error.message;\n      });\n      (_formRef$current = formRef.current) === null || _formRef$current === void 0 ? void 0 : _formRef$current.setErrors(validationErrors);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(VForm, {\n    ref: formRef,\n    onSubmit: handleSave,\n    children: /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      direction: \"row\",\n      justifyContent: \"space-between\",\n      alignItems: \"center\",\n      borderBottom: 1,\n      spacing: {\n        xs: 0,\n        md: 0\n      },\n      columns: {\n        xs: 3,\n        sm: 6,\n        md: 8\n      },\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        spacing: 0,\n        margin: 0,\n        padding: 0,\n        children: /*#__PURE__*/_jsxDEV(IconButton, {\n          size: \"small\",\n          onClick: () => handleDelete(data.id),\n          children: /*#__PURE__*/_jsxDEV(Icon, {\n            children: \"delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 2,\n        sm: 4,\n        md: 3,\n        children: /*#__PURE__*/_jsxDEV(AutoCompleteItem, {\n          isExternalLoading: isLoading,\n          itemID: data.itemID\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 2,\n        sm: 4,\n        md: 2,\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          variant: \"standard\",\n          defaultValue: data.amount,\n          onChange: e => setChangedAmount(Number(e.target.value)),\n          onBlur: () => handleSave(data)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 2,\n        sm: 4,\n        md: 2,\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          variant: \"standard\",\n          defaultValue: data.total,\n          onChange: e => setChangedTotal(Number(e.target.value)),\n          onBlur: () => handleSave(data)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this)\n  }, key, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n};\n\n_s(TableList, \"aynPWPF8FLLmN6LkP0vW1VZ1Z/s=\", false, function () {\n  return [useVForm, useNavigate];\n});\n\n_c = TableList;\nexport default TableList;\n\nvar _c;\n\n$RefreshReg$(_c, \"TableList\");","map":{"version":3,"sources":["/home/brenomatheus/Documentos/frontend/src/pages/orders/components/itemofLines/TableList.tsx"],"names":["React","useState","Grid","Icon","IconButton","TextField","formValidationSchema","ItemofLinesService","VForm","useVForm","useNavigate","AutoCompleteItem","TableList","data","key","id","handleDelete","changedAmount","setChangedAmount","amount","changedTotal","setChangedTotal","total","isLoading","setIsLoading","formRef","isSaveAndClose","navigate","handleSave","dados","validate","abortEarly","then","dadosValidados","updateById","Number","result","Error","alert","message","catch","errors","validationErrors","inner","forEach","error","path","current","setErrors","xs","md","sm","itemID","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\n\nimport { Grid, Icon, IconButton, TextField } from '@mui/material';\nimport * as yup from 'yup';\nimport { formValidationSchema } from './DetailItemofLines';\nimport {\n  IListItemofLine,\n  ItemofLinesService,\n} from '../../../../shared/services/api/itemofLines/ItemofLinesService';\nimport { IVFormErrors, VForm, useVForm } from '../../../../shared/forms';\nimport { useNavigate } from 'react-router-dom';\nimport { AutoCompleteItem } from './AutoCompleteItem';\n\ntype TVTextFieldProps = {\n  name: string;\n  data: IListItemofLine;\n  key: number;\n  id: number;\n  handleDelete:any;\n};\n\nexport interface IFormData {\n  orderID: number;\n  itemID: number;\n  amount: number;\n  total: number;\n}\n\nexport const TableList: React.FC<TVTextFieldProps> = ({ data, key, id, handleDelete }) => {\n  const [changedAmount, setChangedAmount] = useState(data.amount);\n  const [changedTotal, setChangedTotal] = useState(data.total);\n  const [isLoading, setIsLoading] = useState(false);\n  const { formRef, isSaveAndClose } = useVForm();\n  const navigate = useNavigate();\n\n  const handleSave = (dados: IFormData) => {\n    formValidationSchema\n      .validate(dados, { abortEarly: false })\n      .then((dadosValidados) => {\n        setIsLoading(true);\n        if (changedAmount !== dados.amount || changedTotal !== dados.total) {\n          ItemofLinesService.updateById(Number(id), {\n            id: Number(id),\n            ...dadosValidados,\n            amount: changedAmount,\n            total: changedTotal,\n          }).then((result) => {\n            setIsLoading(false);\n\n            if (result instanceof Error) {\n              alert(result.message);\n            } else {\n              if (isSaveAndClose()) {\n                navigate('/orders');\n              }\n            }\n          });\n        }\n      })\n      .catch((errors: yup.ValidationError) => {\n        const validationErrors: IVFormErrors = {};\n\n        errors.inner.forEach((error) => {\n          if (!error.path) return;\n\n          validationErrors[error.path] = error.message;\n        });\n\n        formRef.current?.setErrors(validationErrors);\n      });\n  };\n\n  return (\n    <VForm key={key} ref={formRef} onSubmit={handleSave}>\n      <Grid\n        container\n        direction=\"row\"\n        justifyContent=\"space-between\"\n        alignItems=\"center\"\n        borderBottom={1}\n        spacing={{ xs: 0, md: 0 }}\n        columns={{ xs: 3, sm: 6, md: 8 }}\n      >\n        <Grid item spacing={0} margin={0} padding={0}>\n          <IconButton size=\"small\" onClick={() => handleDelete(data.id)}>\n            <Icon>delete</Icon>\n          </IconButton>\n        </Grid>\n        <Grid item xs={2} sm={4} md={3}>\n          <AutoCompleteItem\n            isExternalLoading={isLoading}\n            itemID={data.itemID}\n          />\n        </Grid>\n\n        <Grid item xs={2} sm={4} md={2}>\n          <TextField\n            variant=\"standard\"\n            defaultValue={data.amount}\n            onChange={(e) => setChangedAmount(Number(e.target.value))}\n            onBlur={() => handleSave(data)}\n          />\n        </Grid>\n        <Grid item xs={2} sm={4} md={2}>\n          <TextField\n            variant=\"standard\"\n            defaultValue={data.total}\n            onChange={(e) => setChangedTotal(Number(e.target.value))}\n            onBlur={() => handleSave(data)}\n          />\n        </Grid>\n      </Grid>\n    </VForm>\n  );\n};\n\nexport default TableList;\n"]},"metadata":{},"sourceType":"module"}