{"ast":null,"code":"var _jsxFileName = \"/home/brenomatheus/Documentos/frontend/src/pages/orders/components/AutoCompleteTechnician.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useMemo, useState } from 'react';\nimport { Autocomplete, CircularProgress, TextField } from '@mui/material';\nimport { TechniciansService } from '../../../shared/services/api/technicians/TechniciansService';\nimport { useDebounce } from '../../../shared/hooks';\nimport { useField } from '@unform/core';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AutoCompleteTechnician = _ref => {\n  _s();\n\n  let {\n    isExternalLoading = false\n  } = _ref;\n  const {\n    fieldName,\n    registerField,\n    defaultValue,\n    error,\n    clearError\n  } = useField('id');\n  const {\n    debounce\n  } = useDebounce();\n  const [selectedTechnicianId, setSelectedTechnicianId] = useState(defaultValue);\n  const [opcoesTechnician, setOpcoesTechnician] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [buscaTechnician, setBuscaTechnician] = useState('');\n  useEffect(() => {\n    registerField({\n      name: fieldName,\n      getValue: () => selectedTechnicianId,\n      setValue: (_, newSelectedId) => setSelectedTechnicianId(newSelectedId)\n    });\n  }, [registerField, fieldName, selectedTechnicianId]);\n  useEffect(() => {\n    setIsLoading(true);\n    debounce(() => {\n      TechniciansService.getAll(1, buscaTechnician, selectedTechnicianId).then(result => {\n        setIsLoading(false);\n\n        if (result instanceof Error) {// alert(result.message);\n        } else {\n          console.log(result);\n          setOpcoesTechnician(result.data.map(technician => ({\n            id: technician.id,\n            label: technician.name\n          })));\n        }\n      });\n    });\n  }, [buscaTechnician, selectedTechnicianId]);\n  const autoCompleteTechnicianSelectedOption = useMemo(() => {\n    if (!selectedTechnicianId) return null;\n    const selectedTechnicianOption = opcoesTechnician.find(opcoesTechnician => opcoesTechnician.id === selectedTechnicianId);\n    if (!selectedTechnicianOption) return null;\n    return selectedTechnicianOption;\n  }, [selectedTechnicianId, opcoesTechnician]);\n  return /*#__PURE__*/_jsxDEV(Autocomplete, {\n    openText: \"Abrir\",\n    closeText: \"Fechar\",\n    noOptionsText: \"Sem op\\xE7\\xF5es\",\n    loadingText: \"Carregando...\",\n    disablePortal: true,\n    options: opcoesTechnician,\n    loading: isLoading,\n    disabled: isExternalLoading,\n    value: autoCompleteTechnicianSelectedOption,\n    onInputChange: (_, newValue) => setBuscaTechnician(newValue),\n    onChange: (_, newValue) => {\n      setSelectedTechnicianId(newValue === null || newValue === void 0 ? void 0 : newValue.id);\n      setBuscaTechnician('');\n      clearError();\n    },\n    popupIcon: isExternalLoading || isLoading ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n      size: 28\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 53\n    }, this) : undefined,\n    renderInput: params => /*#__PURE__*/_jsxDEV(TextField, { ...params,\n      label: \"T\\xE9cnico\",\n      error: !!error,\n      helperText: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n};\n\n_s(AutoCompleteTechnician, \"83teHLxXB2D1uVzMuEHy855KNYw=\", false, function () {\n  return [useField, useDebounce];\n});\n\n_c = AutoCompleteTechnician;\n\nvar _c;\n\n$RefreshReg$(_c, \"AutoCompleteTechnician\");","map":{"version":3,"sources":["/home/brenomatheus/Documentos/frontend/src/pages/orders/components/AutoCompleteTechnician.tsx"],"names":["useEffect","useMemo","useState","Autocomplete","CircularProgress","TextField","TechniciansService","useDebounce","useField","AutoCompleteTechnician","isExternalLoading","fieldName","registerField","defaultValue","error","clearError","debounce","selectedTechnicianId","setSelectedTechnicianId","opcoesTechnician","setOpcoesTechnician","isLoading","setIsLoading","buscaTechnician","setBuscaTechnician","name","getValue","setValue","_","newSelectedId","getAll","then","result","Error","console","log","data","map","technician","id","label","autoCompleteTechnicianSelectedOption","selectedTechnicianOption","find","newValue","undefined","params"],"mappings":"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","sourcesContent":["import { useEffect, useMemo, useState } from 'react';\nimport { Autocomplete, CircularProgress, TextField } from '@mui/material';\n\nimport { TechniciansService } from '../../../shared/services/api/technicians/TechniciansService';\nimport { useDebounce } from '../../../shared/hooks';\nimport { useField } from '@unform/core';\n\n\ntype TAutoCompleteOption = {\n  id: number;\n  label: string;\n}\n\ninterface IAutoCompleteTechnicianProps {\n  isExternalLoading?: boolean;\n}\nexport const AutoCompleteTechnician: React.FC<IAutoCompleteTechnicianProps> = ({ isExternalLoading = false }) => {\n  const { fieldName, registerField, defaultValue, error, clearError } = useField('id');\n  const { debounce } = useDebounce();\n\n  const [selectedTechnicianId, setSelectedTechnicianId] = useState<number | undefined>(defaultValue);\n\n  const [opcoesTechnician, setOpcoesTechnician] = useState<TAutoCompleteOption[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [buscaTechnician, setBuscaTechnician] = useState('');\n\n  useEffect(() => {\n    registerField({\n      name: fieldName,\n      getValue: () => selectedTechnicianId,\n      setValue: (_, newSelectedId) => setSelectedTechnicianId(newSelectedId),\n    });\n  }, [registerField, fieldName, selectedTechnicianId]);\n\n  useEffect(() => {\n    setIsLoading(true);\n\n    debounce(() => {\n      TechniciansService.getAll(1, buscaTechnician, selectedTechnicianId)\n        .then((result) => {\n          setIsLoading(false);\n\n          if (result instanceof Error) {\n            // alert(result.message);\n          } else {\n            console.log(result);\n\n            setOpcoesTechnician(result.data.map(technician => ({ id: technician.id, label: technician.name })));\n          }\n        });\n    });\n  }, [buscaTechnician, selectedTechnicianId]);\n\n  const autoCompleteTechnicianSelectedOption = useMemo(() => {\n    if (!selectedTechnicianId) return null;\n\n    const selectedTechnicianOption = opcoesTechnician.find(opcoesTechnician => opcoesTechnician.id === selectedTechnicianId);\n    if (!selectedTechnicianOption) return null;\n\n    return selectedTechnicianOption;\n  }, [selectedTechnicianId, opcoesTechnician]);\n\n\n  return (\n    <Autocomplete\n      openText='Abrir'\n      closeText='Fechar'\n      noOptionsText='Sem opções'\n      loadingText='Carregando...'\n\n      disablePortal\n\n      options={opcoesTechnician}\n      loading={isLoading}\n      disabled={isExternalLoading}\n      value={autoCompleteTechnicianSelectedOption}\n      onInputChange={(_, newValue) => setBuscaTechnician(newValue)}\n      onChange={(_, newValue) => { setSelectedTechnicianId(newValue?.id); setBuscaTechnician(''); clearError(); }}\n      popupIcon={(isExternalLoading || isLoading) ? <CircularProgress size={28} /> : undefined}\n      renderInput={(params) => (\n        <TextField\n          {...params}\n\n          label=\"Técnico\"\n          error={!!error}\n          helperText={error}\n        />\n      )}\n    />\n  );\n};\n"]},"metadata":{},"sourceType":"module"}