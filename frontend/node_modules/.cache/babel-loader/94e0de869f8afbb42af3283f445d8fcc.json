{"ast":null,"code":"import _toConsumableArray from\"/home/brenomatheus/Documentos/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/home/brenomatheus/Documentos/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useMemo,useState}from'react';import{Icon,IconButton,LinearProgress,Pagination,Paper,Table,TableBody,TableCell,TableContainer,TableFooter,TableHead,TableRow}from'@mui/material';import{useNavigate,useSearchParams}from'react-router-dom';import{ItemsService}from'../../shared/services/api/items/ItemsService';import{ToolsListing}from'../../shared/components';import{LayoutBaseDePagina}from'../../shared/layouts';import{Environment}from'../../shared/environment';import{useDebounce}from'../../shared/hooks';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var ListItems=function ListItems(){var _useSearchParams=useSearchParams(),_useSearchParams2=_slicedToArray(_useSearchParams,2),searchParams=_useSearchParams2[0],setSearchParams=_useSearchParams2[1];var _useDebounce=useDebounce(),debounce=_useDebounce.debounce;var navigate=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),rows=_useState2[0],setRows=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),totalCount=_useState6[0],setTotalCount=_useState6[1];var search=useMemo(function(){return searchParams.get('search')||'';},[searchParams]);var page=useMemo(function(){return Number(searchParams.get('page')||'1');},[searchParams]);useEffect(function(){setIsLoading(true);debounce(function(){ItemsService.getAll(page,search).then(function(result){setIsLoading(false);if(result instanceof Error){alert(result.message);}else{console.log(result);setTotalCount(result.totalCount);setRows(result.data);}});});},[search,page]);var handleDelete=function handleDelete(id){if(confirm('Realmente deseja apagar?')){ItemsService.deleteById(id).then(function(result){if(result instanceof Error){alert(result.message);}else{setRows(function(oldRows){return _toConsumableArray(oldRows.filter(function(oldRow){return oldRow.id!==id;}));});alert('Registro apagado com sucesso!');}});}};return/*#__PURE__*/_jsx(LayoutBaseDePagina,{titulo:\"Produtos/Servi\\xE7os\",barraDeFerramentas:/*#__PURE__*/_jsx(ToolsListing,{mostrarInputBusca:true,textoDaBusca:search,textoBotaoNovo:\"Nova\",aoClicarEmNovo:function aoClicarEmNovo(){return navigate('/items/detail/nova');},aoMudarTextoDeBusca:function aoMudarTextoDeBusca(texto){return setSearchParams({search:texto,page:'1'},{replace:true});}}),children:/*#__PURE__*/_jsx(TableContainer,{component:Paper,variant:\"outlined\",sx:{m:1,width:'auto'},children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{width:100,children:\"A\\xE7\\xF5es\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Nome\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Quantidade\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Pre\\xE7o\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:rows.map(function(row){return/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsxs(TableCell,{children:[/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:function onClick(){return handleDelete(row.id);},children:/*#__PURE__*/_jsx(Icon,{children:\"delete\"})}),/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:function onClick(){return navigate(\"/items/detail/\".concat(row.id));},children:/*#__PURE__*/_jsx(Icon,{children:\"edit\"})})]}),/*#__PURE__*/_jsx(TableCell,{children:row.name}),/*#__PURE__*/_jsx(TableCell,{children:row.amount}),/*#__PURE__*/_jsx(TableCell,{children:row.price})]},row.id);})}),totalCount===0&&!isLoading&&/*#__PURE__*/_jsx(\"caption\",{children:Environment.EMPTY_LISTING}),/*#__PURE__*/_jsxs(TableFooter,{children:[isLoading&&/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsx(TableCell,{colSpan:3,children:/*#__PURE__*/_jsx(LinearProgress,{variant:\"indeterminate\"})})}),totalCount>0&&totalCount>Environment.LIMITE_DE_LINHAS&&/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsx(TableCell,{colSpan:3,children:/*#__PURE__*/_jsx(Pagination,{page:page,count:Math.ceil(totalCount/Environment.LIMITE_DE_LINHAS),onChange:function onChange(_,newPage){return setSearchParams({search:search,page:newPage.toString()},{replace:true});}})})})]})]})})});};","map":{"version":3,"sources":["/home/brenomatheus/Documentos/frontend/src/pages/items/List.tsx"],"names":["useEffect","useMemo","useState","Icon","IconButton","LinearProgress","Pagination","Paper","Table","TableBody","TableCell","TableContainer","TableFooter","TableHead","TableRow","useNavigate","useSearchParams","ItemsService","ToolsListing","LayoutBaseDePagina","Environment","useDebounce","ListItems","searchParams","setSearchParams","debounce","navigate","rows","setRows","isLoading","setIsLoading","totalCount","setTotalCount","search","get","page","Number","getAll","then","result","Error","alert","message","console","log","data","handleDelete","id","confirm","deleteById","oldRows","filter","oldRow","texto","replace","m","width","map","row","name","amount","price","EMPTY_LISTING","LIMITE_DE_LINHAS","Math","ceil","_","newPage","toString"],"mappings":"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","sourcesContent":["import { useEffect, useMemo, useState } from 'react';\nimport { Icon, IconButton, LinearProgress, Pagination, Paper, Table, TableBody, TableCell, TableContainer, TableFooter, TableHead, TableRow } from '@mui/material';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\n\nimport { IListItem, ItemsService, } from '../../shared/services/api/items/ItemsService';\nimport { ToolsListing } from '../../shared/components';\nimport { LayoutBaseDePagina } from '../../shared/layouts';\nimport { Environment } from '../../shared/environment';\nimport { useDebounce } from '../../shared/hooks';\n\n\nexport const ListItems: React.FC = () => {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const { debounce } = useDebounce();\n  const navigate = useNavigate();\n\n  const [rows, setRows] = useState<IListItem[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [totalCount, setTotalCount] = useState(0);\n\n\n  const search = useMemo(() => {\n    return searchParams.get('search') || '';\n  }, [searchParams]);\n\n  const page = useMemo(() => {\n    return Number(searchParams.get('page') || '1');\n  }, [searchParams]);\n\n\n  useEffect(() => {\n    setIsLoading(true);\n\n    debounce(() => {\n      ItemsService.getAll(page, search)\n        .then((result) => {\n          setIsLoading(false);\n\n          if (result instanceof Error) {\n            alert(result.message);\n          } else {\n            console.log(result);\n\n            setTotalCount(result.totalCount);\n            setRows(result.data);\n          }\n        });\n    });\n  }, [search, page]);\n\n  const handleDelete = (id: number) => {\n    if (confirm('Realmente deseja apagar?')) {\n      ItemsService.deleteById(id)\n        .then(result => {\n          if (result instanceof Error) {\n            alert(result.message);\n          } else {\n            setRows(oldRows => [\n              ...oldRows.filter(oldRow => oldRow.id !== id),\n            ]);\n            alert('Registro apagado com sucesso!');\n          }\n        });\n    }\n  };\n\n\n  return (\n    <LayoutBaseDePagina\n      titulo='Produtos/Serviços'\n      barraDeFerramentas={\n        <ToolsListing\n          mostrarInputBusca\n          textoDaBusca={search}\n          textoBotaoNovo='Nova'\n          aoClicarEmNovo={() => navigate('/items/detail/nova')}\n          aoMudarTextoDeBusca={texto => setSearchParams({ search: texto, page: '1' }, { replace: true })}\n        />\n      }\n    >\n      <TableContainer component={Paper} variant=\"outlined\" sx={{ m: 1, width: 'auto' }}>\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell width={100}>Ações</TableCell>\n              <TableCell>Nome</TableCell>\n              <TableCell>Quantidade</TableCell>\n              <TableCell>Preço</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {rows.map(row => (\n              <TableRow key={row.id}>\n                <TableCell>\n                  <IconButton size=\"small\" onClick={() => handleDelete(row.id)}>\n                    <Icon>delete</Icon>\n                  </IconButton>\n                  <IconButton size=\"small\" onClick={() => navigate(`/items/detail/${row.id}`)}>\n                    <Icon>edit</Icon>\n                  </IconButton>\n                </TableCell>\n                <TableCell>{row.name}</TableCell>\n                <TableCell>{row.amount}</TableCell>\n                <TableCell>{row.price}</TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n\n          {totalCount === 0 && !isLoading && (\n            <caption>{Environment.EMPTY_LISTING}</caption>\n          )}\n\n          <TableFooter>\n            {isLoading && (\n              <TableRow>\n                <TableCell colSpan={3}>\n                  <LinearProgress variant='indeterminate' />\n                </TableCell>\n              </TableRow>\n            )}\n            {(totalCount > 0 && totalCount > Environment.LIMITE_DE_LINHAS) && (\n              <TableRow>\n                <TableCell colSpan={3}>\n                  <Pagination\n                    page={page}\n                    count={Math.ceil(totalCount / Environment.LIMITE_DE_LINHAS)}\n                    onChange={(_, newPage) => setSearchParams({ search, page: newPage.toString() }, { replace: true })}\n                  />\n                </TableCell>\n              </TableRow>\n            )}\n          </TableFooter>\n        </Table>\n      </TableContainer>\n    </LayoutBaseDePagina>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}